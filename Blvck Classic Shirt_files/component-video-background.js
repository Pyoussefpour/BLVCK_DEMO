if(typeof VideoBackgroundElement!="function"){class VideoBackgroundElement2 extends HTMLElement{constructor(){super(),this._eventSuccess=new Event("success"),this._eventFail=new Event("fail");const video=this.querySelector("video");video.addEventListener("error",e=>{this.switchFallback()}),video.addEventListener("playing",e=>{this.classList.contains("loaded")||(this.classList.add("loaded"),this.dispatchEvent(this._eventSuccess))}),video.addEventListener("stalled",e=>{this.classList.contains("loaded")||this.switchFallback()});const handleIntersection=(entries,observer)=>{entries[0].isIntersecting&&((entries[0].target.querySelector("video-background-element")&&!entries[0].target.querySelector("video-background-element").classList.contains("loaded")||entries[0].tagName=="video-background-element"&&!entries[0].target.classList.contains("loaded"))&&(video.querySelectorAll("source").forEach(elm=>{elm.src=elm.dataset.src}),video.load()),observer.unobserve(this))};this.getBoundingClientRect().y<window.innerHeight||this.parentNode.getBoundingClientRect().y<window.innerHeight?(video.querySelectorAll("source").forEach(elm=>{elm.src=elm.dataset.src}),video.load()):(new IntersectionObserver(handleIntersection.bind(this),{rootMargin:"0px 0px 400px 0px"}).observe(this),new IntersectionObserver(handleIntersection.bind(this),{rootMargin:"0px 0px 400px 0px"}).observe(this.parentElement))}switchFallback(){const fallback=this.parentElement.querySelector(`[data-video-background-fallback][data-id="${this.dataset.id}"]`);fallback&&(fallback.append(fallback.querySelector("template").content.cloneNode(!0)),fallback.querySelector("img").setAttribute("srcset",fallback.querySelector("img").getAttribute("srcset"))),this.dispatchEvent(this._eventFail)}}typeof customElements.get("video-background-element")>"u"&&customElements.define("video-background-element",VideoBackgroundElement2)}document.addEventListener("shopify:section:load",e=>{e.target.classList.contains("mount-video-background")&&setTimeout(()=>{e.target.querySelectorAll("video-background-element").forEach(elm=>{elm.querySelectorAll("source").forEach(source=>{source.src=source.dataset.src}),elm.querySelector("video").load()})},500)});
//# sourceMappingURL=/cdn/shop/t/94/assets/component-video-background.js.map?v=144337521800850417181731661025
