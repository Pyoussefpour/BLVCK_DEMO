if(typeof SearchForm!="function"){class SearchForm2 extends HTMLElement{constructor(){if(super(),this.cachedResults={},this.input=this.querySelector("[data-js-search-input]"),this.predictiveSearchResults=this.querySelector("[data-js-search-results]"),this.results=[],this.preloader=!1,KROWN.settings.predictive_search_enabled!="false"){let inputValue=this.input.value;this.input.addEventListener("keyup",debounce(e=>{this.input.value!=inputValue?(inputValue=this.input.value,this.getSearchResults(this.input.value.trim())):this.input.value==""&&this.clearSearchResults()},150)),this.input.addEventListener("keydown",e=>{this.a11yIndex!=-1&&(e.keyCode===window.KEYCODES.UP||e.keyCode===window.KEYCODES.DOWN||e.keyCode===window.KEYCODES.RETURN)&&e.preventDefault()}),this.input.addEventListener("keyup",e=>{if(e.keyCode===window.KEYCODES.UP)return this.navigateThrough("UP"),!0;if(e.keyCode===window.KEYCODES.DOWN)return this.navigateThrough("DOWN"),!0;e.keyCode===window.KEYCODES.RETURN&&this.a11yIndex!=-1&&(document.location.href=this.results[this.a11yIndex].tagName=="A"?this.results[this.a11yIndex].href:this.results[this.a11yIndex].querySelector("a").href)})}}getSearchResults(query=""){this.preloadSearchResults();const queryKey=query.replace(" ","-").toLowerCase();if(this.cachedResults[queryKey]){this.renderSearchResults(this.cachedResults[queryKey]);return}this.a11yIndex=-1,fetch(`${KROWN.settings.routes.predictive_search_url}?q=${encodeURIComponent(query)}&section_id=helper-predictive-search`).then(response=>{if(!response.ok){var error=new Error(response.status);throw this.clearSearchResults(),error}return response.text()}).then(text=>{const results=new DOMParser().parseFromString(text,"text/html").querySelector("#shopify-section-helper-predictive-search").innerHTML;this.cachedResults[queryKey]=results,this.renderSearchResults(results)}).catch(e=>{throw e})}clearSearchResults(){this.predictiveSearchResults.innerHTML="",this.preloader=!1,this.results=[]}preloadSearchResults(){this.preloader||(this.preloader=!0,this.predictiveSearchResults.innerHTML=KROWN.settings.predictive_search_placeholder)}renderSearchResults(results){this.predictiveSearchResults.innerHTML=results,this.preloader=!1,this.results=this.predictiveSearchResults.querySelectorAll("[data-js-search-item]")}navigateThrough(direction){this.a11yIndex==-1?this.a11yIndex=0:(this.results[this.a11yIndex].classList.remove("active"),direction=="UP"?this.a11yIndex-1>=-1&&this.a11yIndex--:direction=="DOWN"&&this.a11yIndex+1<this.results.length&&this.a11yIndex++),this.a11yIndex>=0?(this.results[this.a11yIndex].classList.add("active"),document.querySelector("[data-js-search-results-holder]").scrollTop=this.results[this.a11yIndex].offsetTop-200):document.querySelector("[data-js-search-results-holder]").scrollTop=0}}typeof customElements.get("search-form")>"u"&&customElements.define("search-form",SearchForm2)}
//# sourceMappingURL=/cdn/shop/t/94/assets/component-predictive-search.js.map?v=125379629480770845521731661025
