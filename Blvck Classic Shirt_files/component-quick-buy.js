class QuickAddToCart extends HTMLElement{constructor(){super(),this.querySelector("product-form")&&this.init()}init(){this.querySelector("product-form").addEventListener("add-to-cart",()=>{document.body.classList.contains("template-cart")?(document.querySelector("#section-cart .box__text").scrollIntoView(),document.querySelector("#section-cart .box__heading .subtitle").innerHTML=document.querySelector("#AjaxCartForm .subtitle").innerHTML):(document.getElementById("site-cart").show(),document.getElementById("cart-recommendations")&&document.getElementById("cart-recommendations").generateRecommendations())})}}customElements.define("quick-add-to-cart",QuickAddToCart);class QuickViewProduct extends HTMLElement{constructor(){super(),this.querySelector("button")&&this.init()}init(){this.quickViewModal=null,this.querySelector("button").addEventListener("click",e=>{if(e.preventDefault(),this.quickViewModal)this.quickViewModal.show();else{const target=e.currentTarget;target.classList.add("working"),fetch(`${target.getAttribute("data-href")}${target.getAttribute("data-href").includes("?")?"&":"?"}view=quick-view`).then(response=>response.text()).then(text=>{const quickViewHTML=new DOMParser().parseFromString(text,"text/html").querySelector(".product-quick-view");this.quickViewModal=basicLightbox.create(quickViewHTML),this.quickViewModal.show(),target.classList.remove("working");const quickProduct=this.quickViewModal.element(),quickProductImage=quickProduct.querySelector(".product-images img"),quickViewImages=JSON.parse(quickProduct.querySelector(".product-images").querySelector('[type="application/json"]').textContent),productVariants=quickProduct.querySelector("product-variants");if(productVariants&&productVariants.addEventListener("VARIANT_CHANGE",e2=>{const variant=e2.target.currentVariant;variant&&variant.featured_media!=null&&quickViewImages[variant.id]!=null&&quickProductImage.setAttribute("srcset",quickViewImages[variant.id])}),!document.body.classList.contains("template-cart")&&KROWN.settings.cart_action=="overlay"){let addToCartEnter=!1;quickProduct.querySelector(".product--add-to-cart-button")&&quickProduct.querySelector(".product--add-to-cart-button").addEventListener("keyup",e2=>{e2.keyCode==window.KEYCODES.RETURN&&(addToCartEnter=!0)}),quickProduct.querySelector(".product--add-to-cart-form")&&quickProduct.querySelector(".product--add-to-cart-form").addEventListener("add-to-cart",()=>{document.getElementById("site-cart").show(),this.quickViewModal.close(),document.getElementById("cart-recommendations")&&document.getElementById("cart-recommendations").generateRecommendations(),addToCartEnter&&setTimeout(()=>{document.querySelector("#site-cart .sidebar__cart-close").focus()},200)})}})}})}}customElements.define("quick-view-product",QuickViewProduct);
//# sourceMappingURL=/cdn/shop/t/94/assets/component-quick-buy.js.map?v=174463222043223317051731661025
